# vcu信号处理原理

#### 基本知识：

什么是ADC？

- ADC(Analog to Digital Converter,A/D转换器)，将外部模拟信号转化为数字信号，数字信号用0和1表示	

ADC有什么参数？

1. 参考电压：ADC所能采集到的最大有效电压
2. 位宽：ADC采用二进制位数
3. 分辨率：ADC每个bit表示的电压值，即`参考电压与2^n-1的比值`，n为位宽

ADC采集传感器信号，经底层处理运算后得到传感器实际电压值，如何运算，和ADC参数有什么关系？

- ADC采集到的是二进制位数，每一位都有自己的分辨率，两者相乘，就能得到ADC的输入电压

为什么要用ADC

- 控制器芯片属于数字器件，需将模拟信号转化为数字信号才能被芯片处理。这就需要模拟转换器ADC

VCU通过什么采集信号？

- VCU上有大量的PIN角，与PIN角相连的大多都是硬线线束，也有CAN线，通过这些PIN角采集信号

VCU采集到的信号有哪几种？

1. 硬线信号：VCU通过`硬线线束`与信号源直接连接，采集到的信号

2. CAN线信号：基于共同的整车CAN网络协议，实现各控制单元的信息共享

硬线信号又有哪些？

1. 数字量信号

   在时间和数字上都是离散的物理量称为数字量，例如空调开关，制动状态

   - 高电平
   - 低电平
   - 高有效
   - 低有效

2. 模拟信号

   在时间和数值上都是连续的信号，经过抽样和量化后可以转化为数字量。例如加速踏板，环境温度

<hr>

1. 如何通过Simulink模型获得CAN报文信息？
2. 报文数据，消息，信号的定义
   - CAN报文数据：VCU底层CAN驱动以数组变量的形式定义的CAN报文数据；只包含原始数据值，无有效参数
   - CAN消息：一列信号的组合；不只是数据值，还有数据参数，比如类型，名称，精度，长度等
   - 打包：将数据值打包成具有参数的消息
   - 信号：CAN消息所携带的具体信号信息，比如电池电压，电机扭矩，充电请求等等
   - 解包：将完整的消息解析成独立的信号信息

3. VCU读取CAN报文数据：在实际开发工程中，控制单元底层CAN驱动模块接受其他控制单元的CAN报文数据，仅有该数据不能获取有效信息，需要`配合dbc文件打包成一条完成的CAN消息`，再按照`预先设定的CAN网络协议`将其解析出有效信号
4. VCU发送CAN报文数据：如同读取VCU报文的方法，VCU发送CAN报文时，仅发送不包含数据参数信息的CAN报文数据段，故VCU须按照预先设定的CANA网络协议将自身处理得到的**信号打包成完整的CAN消息**，再**提取**消息中的数据段形成CAN报文数据，发送给其他控制单元使用

5. VCU开发流程
   1. 需求分析
      1. 形成需求规范
      2. 开发平台选择
   2. 系统设计
      1. 网络架构设计
      2. 软件架构设计
   3. 软件设计
      1. 控制策略设计（根据VCU软件架构，将功能需求转化为详细的控制策略）
         1. 工具：office
         2. 交付物：设计说明文档
      2. 算法模型搭建（根据设计说明，搭建软件策略模型，生成c代码）
         1. 工具MATLAB/SIMULINK
         2. 交付物：策略模型
      3. 模型仿真测试（根据策略模型，创建模型单元测试环境，编写测试用例，验证模型功能）
         1. 工具：SIMULINK
         2. 交付物：测试报告
   4. 软件实现
      1. 自动代码生成
      2. 软硬件集成
   5. HIL测试
      1. 搭建HIL测试模型
      2. 自动化仿真测试
   6. 台架测试
      1. 台架测试
      2. 基础标定
   7. 实车测试
      1. 整车标定
      2. 原型样车




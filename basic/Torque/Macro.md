# 需求扭矩模块

## 提供的服务

VCU根据驾驶员的操作意图, 计算出车辆行驶所需要的扭矩值

<hr>

## 使用说明


### 输入


1. 根据驾驶员的操作,即加速踏板开度, 挡位, 电机转速, 驾驶模式(只有D档才有驾驶区分)查不同的扭矩MAP表得到初始驱动需求扭矩值
2. 根据电池包驱动功率(BMS信号),电机保护(MCU信号), 车速进行扭矩限制, 得到驱动扭矩限值,再经过扭矩协调和滤波处理可得到最终德驱动扭矩值

### 输出

VCU输出扭矩指令给MCU
MCU根据VCU扭矩指令调节电机转速驱动车辆运动

### 逻辑计算

需求扭矩计算：驱动扭矩值=基础扭矩值+补偿扭矩值
基础扭矩:(常根据扭矩MAP表查询(标定工程师标定),根据不同驾驶模式下或不同挡位下电机转速,加速踏板开度查询)
补偿扭矩: (课程中引入的概念,主要满足驾驶员对车辆瞬时加速性能的需求, 也是查表, 影响因素是加速踏板开度变化率及当前车速)
	

驱动扭矩限制:可从以下几个角度进行限制：可根据电池，电机(电机保护)，车速等对驱动扭矩进行限制。最终取最小的限值。

电池包: 动力来源

<hr>


## 服务的实现

### 开发流程

- 策略设计：根据VCU软件架构设计，将功能需求转化为详细的控制策略。交付物：设计说明文档。
  - 需要什么：加速踏板开度，电机转速，车速，挡位等
  - 想要什么：驱动扭矩
  - 如何实现
- 模型仿真测试是在软件设计这一流程中。
  - 仿真测试：创建模型单元测试环境，编写测试用例，验证模型功能。交付物：测试报告
- 软硬件集成是在软件实现这一块。
- HIL测试

### 电机

永磁同步电机, 有功率密度高, 能量转换效率高, 能耗较低的优势, 所以电动车一般使用永磁同步电机作为驱动电机
	特征:

  - 低速恒扭矩, 高速恒功率(实际上随转速继续升高, 功率会略微下降)
    公式:T=9550P/n (电机扭矩,驱动功率,电机转速这三者的关系是确定的)

## 依赖

转速与扭矩的关系

车速与电机转速的关系: 车速和电机转速成正相关
![image-20220121103329130](../../../../AppData/Roaming/Typora/typora-user-images/image-20220121103329130.png)

### 电池允许的放电功率分配

<hr>
## 实践问题

### 扭矩与转速的关系

<hr>
## 扭矩路径

![image-20211113102333543](C:\Users\123\Program\VCU\basic\image\image-20211113102333543.png)

### **需求扭矩计算策略框架：**



![image-20211113094227592](C:\Users\123\Program\VCU\basic\image\image-20211113094227592.png)

<hr>